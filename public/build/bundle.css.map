{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Dropzone.svelte"
  ],
  "sourcesContent": [
    "<main>\n\t<h1>Contact Cleaner</h1>\n    <p>Use this to clean up your messy CSV contact sheets and turn them into beautiful JSON.</p>\n    <br />\n\t<Dropzone\n        dropzoneClass=\"dropzone\"\n        hoveringClass=\"dropzone-hovering\"\n        id=\"dz\"\n        on:addedfile={addedFile}\n        on:processing={processingFile}\n        on:complete={processingComplete}\n        acceptedFiles=\"text/csv\">\n        {#if processing}\n            <p>Processing...</p>\n        {:else}\n            <p>Click or drop a file here to upload</p>\n        {/if}\n    </Dropzone>\n    <br />\n    {#if showDownload}\n        <div class=\"download-area\">\n            <p class=\"notice\">Merged a total of {mergedContacts} contacts</p>\n            <div class=\"download-buttons\">\n                <a class=\"download-button\" href=\"#\" download=\"contacts.json\" on:click={openSucceededUri}>Download {succeededContacts} Contacts</a>\n                <a class=\"download-button\" href=\"#\" download=\"failed-contacts.json\" on:click={openFailedUri}>Download {failedContacts} Failed Contacts</a>\n            </div>\n            <p class=\"help\">Right click and select \"Save Link As...\" to save</p>\n        </div>\n    {/if}\n</main>\n\n<style>\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n\t\tmargin: 0 auto;\n\t}\n\th1 {\n\t\tcolor: #ff3e00;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n    }\n    .download-area {\n        margin: 0px auto;\n        max-width: 500px;\n    }\n    .download-area .notice {\n        color: #ff3e00;\n        background: transparent;\n        padding: 10px;\n        border: 1px dotted #ff3e00;\n        display: block;\n        margin-top: 10px;\n        text-align: center;\n    }\n    .download-area .help {\n        color: #444444;\n        background: transparent;\n        padding: 10px;\n        border: 1px dotted #444444;\n        display: block;\n        margin-top: 10px;\n        text-align: center;\n    }\n    .download-buttons {\n        display: flex;\n        justify-content: space-between;\n        margin-top: 10px;\n    }\n    .download-button {\n        color: #ff3e00;\n        text-decoration: none;\n        background: transparent;\n        padding: 10px;\n        border: 1px solid #ff3e00;\n        display: inline-block;\n        flex-grow: 1;\n        flex-basis: fit-content;\n        text-align: center;\n    }\n    .download-button:not(:last-child) {\n        margin-right: 5px;\n    }\n    .download-button:not(:first-child) {\n        margin-left: 5px;\n    }\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>\n\n<script>\n    import Dropzone from \"./Dropzone.svelte\"\n    import CSVParser from './csv_parser'\n\n    let processing = false\n    let succeededUri = null\n    let failedUri = null\n    let succeededContacts = 0\n    let failedContacts = 0\n    let mergedContacts = 0\n    let showDownload = false\n    \n    const openSucceededUri = (e) => {\n        e.preventDefault()\n        window.open(succeededUri, 'contacts.json')\n    }\n\n    const openFailedUri = (e) => {\n        e.preventDefault()\n        window.open(failedUri, 'failed-contacts.json')\n    }\n\n    const addedFile = (e) => {\n        const file = e.detail\n        const reader = new FileReader(file)\n        reader.onload = function(event) {\n            const [, b64] = event.target.result.split(',')\n            const text = atob(b64)\n            processCSV(text)\n        }\n        reader.readAsDataURL(file)\n    }\n\n    const processingFile = (e) => processing = true\n    const processingComplete = (e) => processing = false\n\n    const processCSV = (csv) => {\n        const { succeeded, failed, merged } = CSVParser.parse(csv)\n        succeededUri = window.URL.createObjectURL(\n            new Blob([JSON.stringify(succeeded)],\n            {type: 'application/javascript'})\n        )\n        failedUri = 'data:application/json,' + encodeURIComponent(JSON.stringify(failed), null, 4)\n        \n        succeededContacts = succeeded.length\n        failedContacts = failed.length\n        mergedContacts = merged\n        showDownload = true\n    }\n</script>",
    "<div action=\"#\" class=\"{dropzoneClass}\" {id}>\n    <slot />\n    <input hidden name=\"sites_data\" type=\"file\" />\n</div>\n\n<style>\n  .dropzone {\n    height: 200px;\n    background: #fdfdfd;\n    border-radius: 5px;\n    border: 2px dashed #ff3e00;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: all 300ms ease-out;\n  }\n  .dropzone.dropzone-hovering {\n    border: 2px solid #ff3e00;\n    background: rgba(255, 62, 0, 0.05);\n  }\n</style>\n\n<script>\n    import { onMount, createEventDispatcher } from 'svelte'\n    import Dropzone from 'dropzone'\n    const dispatch = createEventDispatcher()\n\n    export let dropzoneClass = 'dropzone'\n    export let hoveringClass = 'dropzone-hovering'\n    export let id = 'dropId'\n    export let autoDiscover = false\n\n    export let clickable = true\n    export let previewTemplate = \"<div/>\"\n    export let acceptedFiles = null\n    export let dictDefaultMessage = ''\n\n    onMount(() => {\n        const dropzoneElement = document.getElementById(id)\n        if (!previewTemplate) {\n            previewTemplate = \"<div/>\"\n        }\n\n        if (!dictDefaultMessage) {\n            dictDefaultMessage = \"\"\n        }\n\n        let svDropzone = new Dropzone(`div#${id}`, {\n            clickable,\n            previewTemplate,\n            acceptedFiles,\n            dictDefaultMessage\n        })\n\n        if (autoDiscover !== true) {\n            svDropzone.autoDiscover = false\n        }\n\n        svDropzone.on(\"addedfile\", f => {\n            dispatch('addedfile', f)\n            dropzoneElement.classList.remove(hoveringClass)\n        })\n\n        svDropzone.on(\"processing\", f => {\n            dispatch('processing', f)\n            dropzoneElement.classList.remove(hoveringClass)\n        })\n\n        svDropzone.on(\"complete\", f => {\n            dispatch('complete', f)\n            dropzoneElement.classList.remove(hoveringClass)\n        })\n\n        svDropzone.on(\"dragenter\", e => {\n            dispatch('dragenter', e)\n            dropzoneElement.classList.toggle(hoveringClass)\n        })\n\n        svDropzone.on(\"dragleave\", e => {\n            dispatch('dragleave', e)\n            dropzoneElement.classList.toggle(hoveringClass)\n        })\n\n        if (clickable !== false) {\n            dropzoneElement.style.cursor = \"pointer\"\n        }\n\n        svDropzone.on(\"error\", (file, errorMessage) => {\n            dispatch('error', [file, errorMessage])\n            console.log(`Error: ${errorMessage}`)\n        })\n    })\n</script>"
  ],
  "names": [],
  "mappings": "AAgCC,IAAI,8BAAC,CAAC,AACL,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,CAAC,CAAC,IAAI,AACf,CAAC,AACD,EAAE,8BAAC,CAAC,AACH,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,SAAS,CACzB,SAAS,CAAE,GAAG,CACd,WAAW,CAAE,GAAG,AACd,CAAC,AACD,cAAc,8BAAC,CAAC,AACZ,MAAM,CAAE,GAAG,CAAC,IAAI,CAChB,SAAS,CAAE,KAAK,AACpB,CAAC,AACD,6BAAc,CAAC,OAAO,eAAC,CAAC,AACpB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,WAAW,CACvB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,GAAG,CAAC,MAAM,CAAC,OAAO,CAC1B,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,6BAAc,CAAC,KAAK,eAAC,CAAC,AAClB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,WAAW,CACvB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,GAAG,CAAC,MAAM,CAAC,OAAO,CAC1B,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,iBAAiB,8BAAC,CAAC,AACf,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,gBAAgB,8BAAC,CAAC,AACd,KAAK,CAAE,OAAO,CACd,eAAe,CAAE,IAAI,CACrB,UAAU,CAAE,WAAW,CACvB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,OAAO,CAAE,YAAY,CACrB,SAAS,CAAE,CAAC,CACZ,UAAU,CAAE,WAAW,CACvB,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,8CAAgB,KAAK,WAAW,CAAC,AAAC,CAAC,AAC/B,YAAY,CAAE,GAAG,AACrB,CAAC,AACD,8CAAgB,KAAK,YAAY,CAAC,AAAC,CAAC,AAChC,WAAW,CAAE,GAAG,AACpB,CAAC,AACJ,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,IAAI,8BAAC,CAAC,AACL,SAAS,CAAE,IAAI,AAChB,CAAC,AACF,CAAC;ACtFA,SAAS,eAAC,CAAC,AACT,MAAM,CAAE,KAAK,CACb,UAAU,CAAE,OAAO,CACnB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CAAC,MAAM,CAAC,OAAO,CAC1B,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,QAAQ,AAChC,CAAC,AACD,SAAS,kBAAkB,eAAC,CAAC,AAC3B,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AACpC,CAAC"
}